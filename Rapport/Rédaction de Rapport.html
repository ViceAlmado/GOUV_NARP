<!DOCTYPE html>
<!-- saved from url=(0063)https://sloslo3215.github.io/Adminstratif-PMFivem-/rapport.html -->
<html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>R√©daction de Rapport</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1e1e2f;
            color: #f0f0f0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            background-color: #2e2e3e;
            border: 1px solid #444;
            color: #fff;
            border-radius: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üìù R√©daction de Rapport</h1>

    <div class="form-group">
        <label for="date">Date :</label>
        <input type="date" id="date" required="">
    </div>

    <div class="form-group">
        <label for="heure">Heure :</label>
        <input type="time" id="heure" required="">
    </div>

    <div class="form-group">
        <label for="grade">Grade :</label>
        <input type="text" id="grade" placeholder="Ex: Brigadier-chef" required="">
    </div>

    <div class="form-group">
        <label for="agent">Nom de l'agent :</label>
        <input type="text" id="agent" required="">
    </div>

    <div class="form-group">
        <label for="infraction">Infraction :</label>
        <input type="text" id="infraction" required="">
    </div>

    <div class="form-group">
        <label for="identite">Identit√© et coordonn√©es :</label>
        <textarea id="identite" rows="4" placeholder="Nom, pr√©nom, adresse, etc." required=""></textarea>
    </div>

    <div class="form-group">
        <label for="vehicule">Informations sur le v√©hicule :</label>
        <textarea id="vehicule" rows="3" placeholder="Mod√®le, plaque, couleur, etc." required=""></textarea>
    </div>

    <div class="form-group">
        <label for="deroulement">D√©roul√© de la situation :</label>
        <textarea id="deroulement" rows="6" required=""></textarea>
    </div>

    <button onclick="envoyerRapport()">üì§ Envoyer le Rapport</button>

    <script>
        function envoyerRapport() {
            const date = document.getElementById("date").value;
            const heure = document.getElementById("heure").value;
            const grade = document.getElementById("grade").value;
            const agent = document.getElementById("agent").value;
            const infraction = document.getElementById("infraction").value;
            const identite = document.getElementById("identite").value;
            const vehicule = document.getElementById("vehicule").value;
            const deroulement = document.getElementById("deroulement").value;

            const message = `üìã **RAPPORT DE POLICE**

üìÖ **Date :** ${date}
üïí **Heure :** ${heure}
üéñÔ∏è **Grade :** ${grade}
üëÆ **Agent :** ${agent}

üö´ **Infraction :** ${infraction}
üßæ **Identit√© & coordonn√©es :**  
${identite}

üöó **V√©hicule :**  
${vehicule}

üìÑ **D√©roul√© de la situation :**  
${deroulement}`;

            const webhookUrl = "https://discord.com/api/webhooks/1372251570107846706/mHHMpezlB-p8a6FBSQnsX6o3yuTDF03YaJnUspKZO2zmr_F3niFUGYPxNULVcEo3HWM7";

            const messages = d√©couperMessage(message, 2000);

            envoyerEnChaines(messages, webhookUrl)
                .then(() => alert("‚úÖ Rapport envoy√© sur Discord !"))
                .catch(error => {
                    console.error(error);
                    alert("‚ùå Une erreur est survenue lors de l'envoi.");
                });
        }

        function d√©couperMessage(message, maxLongueur) {
            const parties = [];
            let reste = message;

            while (reste.length > maxLongueur) {
                let coupure = reste.lastIndexOf('\n', maxLongueur);
                if (coupure === -1) coupure = maxLongueur;

                parties.push(reste.slice(0, coupure));
                reste = reste.slice(coupure).trim();
            }

            if (reste.length > 0) {
                parties.push(reste);
            }

            return parties;
        }

        async function envoyerEnChaines(messages, webhookUrl) {
            for (const msg of messages) {
                await fetch(webhookUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ content: msg })
                });
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }
    </script>


</body></html>